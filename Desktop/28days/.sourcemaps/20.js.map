{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n  ],\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, AlertController, LoadingController } from 'ionic-angular';\nimport firebase from 'firebase';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { UserProvider } from '../../providers/user/user';\nimport { Storage } from '@ionic/storage';\nimport { NavParams, ModalController } from 'ionic-angular';\n\n/**\n * Generated class for the HomePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage {\n  /* Initialize variables */\n  loading;\n  user;\n  userprofile;\n  username;\n  photoURL;\n  greeting;\n  origGreeting;\n  showmodal = false;\n  constructor(public navCtrl: NavController, public alertCtrl: AlertController, public auth: AuthProvider, public userProvider: UserProvider,\n    public storage: Storage, public loadingCtrl: LoadingController, public params: NavParams, public modalCtrl: ModalController) {\n    // Receive message from push notifications\n    if (params.data.message) {\n      console.log('message: ' + params.data.message);  \n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad - Home')\n    // present loading\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n\n    // set defualt user photo\n    this.photoURL = 'assets/profile0.png';\n\n    // check if user already logged-in\n    this.user = firebase.auth().currentUser;\n    if (this.user) {\n      // user already logged-in\n      console.log('this.user: ' + this.user.displayName + '/' + this.user.photoURL);\n      this.username = this.user.displayName;\n      this.photoURL = this.user.photoURL;\n      \n      this.userProvider.getUserprofile(this.user.uid).then((userprofile) => {\n        console.log(\"user profile\");\n        console.log(JSON.stringify(userprofile));\n        this.userprofile = userprofile;\n        this.greeting = this.userprofile.greeting;\n        this.loading.dismiss();\n      })\n    } else {\n      // check if cache info exists in local storage\n      this.storage.get('localcred').then((localcred) => {\n        if (localcred) {\n          // cache exists\n          this.auth.loginUser(localcred.email, localcred.password).then((user) => {\n            console.log('Home - ionViewDidLoad - load token ' + user.displayName + '/' + user.photoURL);\n            this.user = user;\n            this.username = this.user.displayName;\n            this.photoURL = this.user.photoURL;\n\n            this.userProvider.getUserprofile(this.user.uid).then((userprofile) => {\n              console.log(\"user profile\");\n              console.log(JSON.stringify(userprofile));\n              this.userprofile = userprofile;\n              this.greeting = this.userprofile.greeting;\n              this.loading.dismiss();\n            });\n          });\n        } else {\n          // cache not found\n          // get username which is typed by user in Intro\n          this.storage.get('username').then((username) => {\n            if (username) {\n              this.username = username;\n            } else {\n              this.username = '28days';\n            }\n            this.greeting = \"안녕하세요! \" + this.username + \" 입니다. 함께 나아가요!\"\n            this.loading.dismiss();\n          });\n        }\n      });\n    }\n  }\n\n  loginpage() {\n    if (this.user) {\n      let alert = this.alertCtrl.create({\n        title: '이미 로그인되어 있습니다.',\n        message: '28days에서 로그아웃하시겠습니까?',\n        buttons: [\n          {\n            text: '확인',\n            handler: () => {\n              // log out from firebase auth service and remove previous cache about user credential\n              this.auth.logoutUser().then(() => {\n                this.storage.remove('localcred').then(() => {\n                  this.navCtrl.setRoot(HomePage);\n                });\n              });\n            }\n          },\n          {\n            text: '취소',\n            role: 'cancel',\n            handler: () => {\n            }\n          }\n        ]\n      });\n      alert.present();\n    } else {\n      this.navCtrl.push('LoginPage');\n    }\n  }\n\n  mypage() {\n    if (this.user) {\n      this.navCtrl.push('MypagePage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  changecharacter() {\n    if (this.user) {\n      this.navCtrl.push('CharacterPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  changename() {\n    if (this.user) {\n      // this.navCtrl.push('SupporterPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  changegreeting() {\n    if (this.user) {\n      // this.navCtrl.push('SupporterPage');\n      setTimeout(() => {\n        this.origGreeting = this.greeting;\n        this.showmodal = true;\n      }, 500);\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  community() {\n    if (this.user) {\n      this.navCtrl.push('CommunityPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  supporter() {\n    if (this.user) {\n      // this.navCtrl.push('GogosupporterPage');\n      this.navCtrl.push('SupporterPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  post() {\n    if (this.user) {\n      this.navCtrl.push('PostPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  meditate() {\n    if (this.user) {\n      this.navCtrl.push('MeditatePage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  test() {\n    this.navCtrl.push('TestPage');\n  }\n\n  diary() {\n    if (this.user) {\n      this.navCtrl.push('DiaryPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  emotionbasket() {\n    if (this.user) {\n      this.navCtrl.push('EmotionbasketPage');\n    } else {\n      this.pleaselogin();\n    }\n  }\n\n  pleaselogin() {\n    let alert = this.alertCtrl.create({\n      title: '로그인 후 사용하실 수 있습니다.',\n      message: '28days에 로그인하시겠습니까?',\n      buttons: [\n        {\n          text: '확인',\n          handler: () => {\n            this.navCtrl.push('LoginPage');\n          }\n        },\n        {\n          text: '취소',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  gogo() {\n    this.navCtrl.push('GogohomePage');\n  }\n\n  modalhandler(modal) {\n    this.greeting = modal.value.greeting;\n    this.showmodal = false;\n    this.userProvider.updateGreeting(modal.value.greeting).then(() => {});\n  }\n\n  dismissModal() {\n    this.showmodal = false;\n    this.greeting = this.origGreeting;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}