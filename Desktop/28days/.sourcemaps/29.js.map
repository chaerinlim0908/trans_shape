{"version":3,"sources":["../../src/pages/communitycomment/communitycomment.module.ts","../../src/pages/communitycomment/communitycomment.ts"],"names":[],"mappings":"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","file":"29.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CommunitycommentPage } from './communitycomment';\n\n@NgModule({\n  declarations: [\n    CommunitycommentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CommunitycommentPage),\n  ],\n})\nexport class CommunitycommentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/communitycomment/communitycomment.module.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CommunitycommentProvider } from '../../providers/communitycomment/communitycomment';\n\n/**\n * Generated class for the CommunitycommentPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-communitycomment',\n  templateUrl: 'communitycomment.html',\n})\nexport class CommunitycommentPage {\n\tcommentForm: FormGroup;\n\tsubcommentForm: FormGroup;\n\tcomments;\n  list_showsubcomment = [];\n  constructor(public navCtrl: NavController, public navParams: NavParams, public events: Events,\n  \tpublic zone: NgZone, public cocomment: CommunitycommentProvider, public formBuilder: FormBuilder) {\n    // this event is published when any changes related to firebase comment data happen in CommunitycommentProvider\n  \tthis.events.subscribe('community-newcomment', () => {\n      this.comments = [];\n      this.zone.run(() => {\n        this.comments = this.cocomment.comments;\n        this.setshowsubcomment(this.comments);\n      });\n    });\n\n    // set validator for comment input form and subcomment input form\n    // text must be required\n    this.commentForm = formBuilder.group({\n      txt: ['', Validators.required]\n    });\n    this.subcommentForm = formBuilder.group({\n      txt: ['', Validators.required]\n    });\n  }\n\n  ionViewDidLoad() {\n    this.cocomment.getallcomments();\n  }\n\n  ionViewWillLeave(){\n    console.log('ionViewWillLeave - Communitycomment');\n    this.events.unsubscribe('community-newcomment');\n    this.cocomment.stoplistencomments();\n  }\n\n  /* user writes comment and push enter button */\n  writeComment() {\n  \tif (this.commentForm.valid) {\n  \t\tvar txt = this.commentForm.value.txt;\n  \t\tthis.commentForm.reset();\n  \t\tthis.cocomment.uploadcomment(txt);\n  \t}\n  }\n\n  /* user clicks subcomment of a comment */\n  showsubcomment(comment) {\n    if (comment.showsubcomment) {\n      comment.showsubcomment = false;\n      // remove commentid from list of subcomments which were opened\n      var index = this.list_showsubcomment.indexOf(comment.commentid);\n      if (index > -1) {\n        this.list_showsubcomment.splice(index, 1);\n      }\n    } else {\n    \tcomment.showsubcomment = true;\n      // push commentid to list of subcomments which were opened\n      this.list_showsubcomment.push(comment.commentid);\n    }\n  }\n\n  /* user writes subcomment and push enter button */\n  writeSubcomment(comment) {\n  \tif (this.subcommentForm.valid) {\n  \t\tvar txt = this.subcommentForm.value.txt;\n  \t\tthis.subcommentForm.reset();\n  \t\tthis.cocomment.uploadSubcomment(comment.commentid, txt);\n  \t}\n  }\n\n  // JSONtoArray(json) {\n  // \treturn Object.keys(json).map(function(k) { return json[k] });\n  // }\n\n  /* set previous state about whether subcomments were shown or not */\n  setshowsubcomment(comments) {\n    for (var i = 0; i < comments.length; i++) {\n      if (this.list_showsubcomment.indexOf(comments[i].commentid) > -1) {\n        comments[i].showsubcomment = true;\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/communitycomment/communitycomment.ts"],"sourceRoot":""}